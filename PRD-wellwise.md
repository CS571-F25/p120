# Product Requirements Document (PRD)
## WellWise Drilling Calculator

**Version:** 3.21
**Date:** February 23, 2026
**Project Repository:** `p120-project` (GitHub Pages deployment at `/p120/`)

---

## Table of Contents

1. [Product Overview](#1-product-overview)
2. [File Structure](#2-file-structure)
3. [UI Design System](#3-ui-design-system)
4. [Key Features and User Flow](#4-key-features-and-user-flow)
5. [Constraints](#5-constraints)
6. [Security](#6-security)
7. [Others — Public APIs and Authorization](#7-others--public-apis-and-authorization)

---

## 1. Product Overview

**WellWise Drilling Calculator** is a professional-grade, browser-based oil and gas well drilling cost estimation tool aimed at petroleum engineers, energy students, and industry professionals who need rapid, globally-contextualized cost projections without requiring access to enterprise drilling software. The application enables users to estimate total well drilling costs across 20 global regions and basins, visualize cost breakdowns through interactive charts, save and compare multiple drilling scenarios side-by-side, and run full economic viability analyses including Net Present Value (NPV), Return on Investment (ROI), break-even oil price, and payback period calculations — all entirely in the browser with no sign-up, no account, and no server required.

The application is built as a **React 19** Single-Page Application (SPA) using **Vite 7** as the build tool. Routing is handled by **React Router 7** using a `HashRouter`, which was deliberately chosen for compatibility with static hosting on **GitHub Pages** (where server-side URL rewriting is not available). The UI is built on **React-Bootstrap 2 / Bootstrap 5** component library with custom CSS variables and a global stylesheet. Data visualization is powered by **Recharts 3**. Icons are drawn from the **React Icons 5** library (FontAwesome and Game Icons subsets). There is no backend, no database, and no authentication system — all user data is persisted to the browser's `localStorage`. The production build is output to the `docs/` folder with a base path of `/p120/` for deployment to GitHub Pages.

---

## 2. File Structure

```
p120-project/
│
├── .claude/
│   └── settings.local.json          # Claude Code local IDE settings (not committed)
│
├── .git/                             # Git repository internals
│
├── docs/                             # Vite production build output → served by GitHub Pages
│   ├── assets/                       # Hashed JS/CSS bundles generated by Vite
│   │   ├── index-[hash].js
│   │   └── index-[hash].css
│   ├── index.html                    # Built HTML entry point
│   └── vite.svg                      # Vite default favicon
│
├── public/
│   └── vite.svg                      # Static assets copied verbatim to build output
│
├── src/
│   │
│   ├── assets/
│   │   └── react.svg                 # Default React logo asset (not used in app UI)
│   │
│   ├── components/
│   │   │
│   │   ├── AboutMe.jsx               # STUB — legacy placeholder, not routed or used
│   │   ├── Home.jsx                  # STUB — legacy placeholder, not routed or used
│   │   │
│   │   ├── calculator/               # Input form sub-components for the Calculator page
│   │   │   ├── DepthInput.jsx        # Number input: well depth in feet (1,000–40,000 ft)
│   │   │   ├── DrillingDaysSlider.jsx# Range slider: drilling duration (10–180 days)
│   │   │   ├── LocationSelector.jsx  # Dropdown: Onshore / Offshore
│   │   │   ├── RegionSelector.jsx    # Grouped dropdown: 5 regions / 20 basins
│   │   │   ├── RigTypeSelector.jsx   # Dropdown: rig types with day rates (dynamic per region)
│   │   │   └── WellInputForm.jsx     # Master form: orchestrates all inputs + triggers calculation
│   │   │
│   │   ├── display/                  # Output/results visualization components
│   │   │   ├── CostBarChart.jsx      # Recharts BarChart: scenario cost comparison
│   │   │   ├── CostBreakdownTable.jsx# Bootstrap table: 3-component cost breakdown
│   │   │   ├── CostPieChart.jsx      # Recharts PieChart: cost distribution by category
│   │   │   ├── CostSummaryCard.jsx   # Card: total cost, base cost, regional multiplier
│   │   │   └── EconomicDashboard.jsx # 4 KPI cards + NPV sensitivity LineChart
│   │   │
│   │   ├── interactive/              # User-action components
│   │   │   ├── ScenarioCard.jsx      # Card displaying a saved scenario's metadata
│   │   │   └── ScenarioSaveButton.jsx# Button + Modal: name and save current calculation
│   │   │
│   │   └── layout/                   # App-wide structural components
│   │       ├── Footer.jsx            # 3-column dark footer with credits and disclaimer
│   │       ├── NavBar.jsx            # Top navigation bar with 4 route links
│   │       └── PageContainer.jsx     # Page wrapper: full-screen bg image + dark overlay
│   │
│   ├── pages/                        # Top-level route components (one per route)
│   │   ├── AnalysisPage.jsx          # /analysis — saved scenario management and analysis
│   │   ├── CalculatorPage.jsx        # /calculator — main cost estimation interface
│   │   ├── HomePage.jsx              # / — landing page with hero and feature highlights
│   │   └── ResourcesPage.jsx         # /resources — methodology, data sources, disclaimers
│   │
│   ├── styles/
│   │   └── global.css                # CSS custom properties, animations, responsive rules
│   │
│   ├── utils/
│   │   ├── calculators/
│   │   │   ├── economicAnalysis.js   # EconomicAnalyzer class: NPV, ROI, break-even, payback
│   │   │   ├── globalCostCalculator.js # GlobalDrillingCalculator class: cost formula engine
│   │   │   └── regionalData.js       # Static lookup tables: multipliers, rig rates, currencies
│   │   └── storage.js                # localStorage CRUD wrapper for scenario persistence
│   │
│   ├── App.css                       # Vite default App-level styles (minimal overrides)
│   ├── App.jsx                       # Root component: HashRouter + Route definitions
│   ├── index.css                     # Vite default root-level styles (minimal)
│   └── main.jsx                      # React entry point: mounts App, imports Bootstrap CSS
│
├── complete-project-documentation.md # In-repo developer documentation (non-PRD)
├── eslint.config.js                  # ESLint 9 flat config (react-hooks, react-refresh)
├── index.html                        # Vite HTML template entry (loads Bootstrap 5 via CDN)
├── package.json                      # Dependencies, scripts, project metadata
├── package-lock.json                 # Exact dependency lockfile
├── README.md                         # Project readme
└── vite.config.js                    # Vite config: base='/p120/', outDir='docs'
```

### Key Dependency Versions

| Package | Version | Role |
|---|---|---|
| `react` | 19.1.1 | UI framework |
| `react-dom` | 19.1.1 | DOM renderer |
| `react-router` | 7.9.5 | Client-side routing (HashRouter) |
| `react-bootstrap` | 2.10.10 | Bootstrap 5 React components |
| `bootstrap` | 5.3.8 | CSS utility framework |
| `react-icons` | 5.5.0 | Icon library (FA + Game Icons) |
| `recharts` | 3.4.1 | SVG chart components |
| `vite` | 7.1.7 | Build tool and dev server |

---

## 3. UI Design System

### 3.1 Theme and Mood

WellWise uses a **dark industrial / professional petroleum** visual theme throughout. Every page features a full-viewport background photograph of oil field infrastructure (rigs, refineries, offshore platforms) sourced from Unsplash, overlaid with a semi-transparent dark gradient (`rgba(0,0,0,0.6)` to `rgba(0,0,0,0.7)`) rendered through the `PageContainer` component. This creates depth, context, and a serious professional atmosphere appropriate for the energy sector audience.

The foreground content sits on **Bootstrap cards** with white or near-white backgrounds, creating a strong visual separation from the dark background layer. This contrast makes the tool feel both visually dramatic and highly readable — similar to an industrial HMI (Human Machine Interface) dashboard.

The mood is: **authoritative, data-driven, industrial, and globally professional.** No playful or consumer-facing aesthetics. The app communicates expertise and precision.

### 3.2 Color Palette

All colors are defined as CSS custom properties in `src/styles/global.css` and directly mirror Bootstrap 5's semantic color system:

| Variable | Hex | Usage |
|---|---|---|
| `--primary-blue` | `#0d6efd` | Primary actions, links, focus rings, range thumb |
| `--secondary-gray` | `#6c757d` | Secondary text, muted labels |
| `--success-green` | `#198754` | Total cost display, positive economic signals, save confirmations |
| `--info-cyan` | `#0dcaf0` | Pie chart card header, details modal header |
| `--warning-yellow` | `#ffc107` | Cost breakdown table header, comparison button, marginal recommendations |
| `--danger-red` | `#dc3545` | Delete actions, regional multipliers >1.0x, "Not Recommended" tier |
| `--dark-gray` | `#212529` | Card headers, navbar, footer backgrounds |
| `--light-gray` | `#f8f9fa` | Card backgrounds, table stripes, body base |

**Chart color palette** (WCAG AA compliant, defined in `CostPieChart.jsx`):
- Deep Blue: `#1e40af` — Fixed Costs
- Emerald Green: `#059669` — Depth-Related Costs
- Amber: `#d97706` — Rig Costs

**Semantic header colors per calculator column:**
- Column 1 (Inputs): `bg-primary` (Bootstrap blue) — signifies user control
- Column 2 (Summary): `bg-success` (Bootstrap green) — signifies output/results
- Column 3a (Table): `bg-warning` (Bootstrap yellow) — signifies data breakdown
- Column 3b (Chart): `bg-info` (Bootstrap cyan) — signifies visualization

### 3.3 Typography

**Font stack:** System UI font stack for maximum cross-platform rendering performance and native-feel readability:
```
-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif
```

**Font weights:**
- Headings (`h1`–`h6`): `font-weight: 600` (semi-bold)
- Display headings (`.display-4`, `.display-5`): `font-weight: 700` (bold)
- Navbar brand: `font-weight: 600`, `letter-spacing: 0.5px`
- Badges: `font-weight: 500` (medium)

**Responsive type scaling (via media queries):**
- `.display-4`: 2.5rem at ≤768px, 2rem at ≤576px (default: ~3.5rem)
- `.display-5`: 2rem at ≤768px, 1.5rem at ≤576px (default: ~3rem)
- `.table`: `font-size: 0.9rem` at ≤768px
- Recharts chart text: `font-size: 12px` at ≤768px

### 3.4 Icon System

Icons come exclusively from the **React Icons 5** library (`react-icons`), which bundles multiple icon sets as individual importable SVG components. The project uses two icon subsets:

**FontAwesome 6 (`fa` prefix) — used for UI and navigation icons:**
| Icon | Import | Used In |
|---|---|---|
| `FaOilCan` | `react-icons/fa` | Navbar brand, HomePage feature card |
| `FaCalculator` | `react-icons/fa` | Navbar link, HomePage "How to Use" step |
| `FaChartBar` | `react-icons/fa` | Navbar Analysis link |
| `FaBook` | `react-icons/fa` | Navbar Resources link |
| `FaHome` | `react-icons/fa` | Navbar Home link |
| `FaSave` | `react-icons/fa` | Scenario Save button, save step icon |
| `FaDownload` | `react-icons/fa` | Resources page, data download indicator |
| `FaGlobeAmericas` | `react-icons/fa` | HomePage feature card "Global Coverage" |
| `FaChartLine` | `react-icons/fa` | HomePage feature card "Economic Analysis" |
| `FaDatabase` | `react-icons/fa` | HomePage feature card "Save & Compare" |
| `FaInfoCircle` | `react-icons/fa` | Info/details buttons |
| `FaTrash` | `react-icons/fa` | Delete scenario button |
| `FaPrint` | `react-icons/fa` | Print report button |
| `FaExclamationTriangle` | `react-icons/fa` | Warning/disclaimer indicators |
| `FaCheck` | `react-icons/fa` | Save confirmation / success |

**Game Icons (`gi` prefix) — used for domain-specific decorative icons:**
| Icon | Import | Used In |
|---|---|---|
| `GiOilRig` | `react-icons/gi` | HomePage hero section large decorative icon |
| `GiOilPump` | `react-icons/gi` | CalculatorPage default state (no results yet) |
| `GiDrilling` | `react-icons/gi` | CalculatorPage / ResourcesPage methodology |

All decorative icons that are purely visual carry `aria-hidden="true"` to prevent screen reader noise. All interactive icon buttons have descriptive `aria-label` attributes.

### 3.5 Animations and Transitions

**Global transitions** (applied to all elements via the universal `*` selector):
```css
transition: background-color 0.15s ease-in-out,
            border-color 0.15s ease-in-out,
            color 0.15s ease-in-out;
```
This creates subtle color-shift feedback on hover for every interactive element without explicit per-component CSS.

**Card hover lift animation** (applied to all Bootstrap `.card` elements):
```css
.card {
  transition: transform 0.2s, box-shadow 0.2s;
}
.card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}
```
Every card in the application gently lifts 2px and casts a deeper shadow on hover, reinforcing interactivity.

**Fade-in animation** (defined, available as `.fade-in` class):
```css
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to   { opacity: 1; transform: translateY(0); }
}
.fade-in { animation: fadeIn 0.3s ease-in; }
```
This 300ms ease-in fade-and-rise animation is defined and available as a utility class. It can be applied to any newly rendered element for entrance effects.

**Bootstrap modal animations:** Bootstrap's built-in `.fade` class provides slide-up/fade-in on modal open and fade-out on close. All three modals on the Analysis page use this.

**Bootstrap alerts:** Success alerts (e.g., scenario saved confirmation) use Bootstrap's built-in dismissible alert with a 3-second auto-dismiss timeout set via `setTimeout`.

**Form range slider thumb:** Custom blue color via `::webkit-slider-thumb` and `::moz-range-thumb` pseudo-elements to match the primary color.

**Custom scrollbar styling** (WebKit browsers only): 10px-wide scrollbar with rounded gray thumb; smooths the dark-theme scrolling aesthetic.

### 3.6 Responsive Design

The application is fully responsive across all device sizes using Bootstrap 5's 12-column grid system and breakpoint classes.

**Bootstrap 5 Breakpoints used:**

| Breakpoint | Prefix | Width | Device Type |
|---|---|---|---|
| Extra small | (none) | <576px | Mobile phones (portrait) |
| Small | `sm` | ≥576px | Mobile phones (landscape) |
| Medium | `md` | ≥768px | Tablets (portrait) |
| Large | `lg` | ≥992px | Tablets (landscape) / Small laptops |
| Extra large | `xl` | ≥1200px | Laptops / Desktops |
| XXL | `xxl` | ≥1400px | Large monitors |

**Page-by-page responsive behavior:**

**HomePage (`/`):**
- On `xl`+: 2-column layout — left (text/steps/CTA) and right (large GiOilRig icon). Approximates golden-ratio split (61.8%/38.2%).
- On `lg` and below: right column collapses to below, icon hidden or stacked.
- Feature cards: `col-md-4` — 3-column on ≥768px, 1-column on mobile.

**CalculatorPage (`/calculator`):**
- On `xl`+: 3 equal columns side-by-side (inputs | summary+save | table+chart).
- On `lg`: 2 columns (inputs occupy one side, results stack on the other).
- On `md` and below: all 3 columns stack vertically in logical order.
- WellInputForm uses `compact` prop in this layout to fit inside a narrower card.

**AnalysisPage (`/analysis`):**
- Scenario cards: `col-md-6 col-lg-4` — 3-column on large, 2-column on medium, 1-column on mobile.
- Modals: Details modal (`size="lg"`), Economics modal (`size="xl"`), Comparison modal (`size="lg"`).
- Modal content (charts, tables) uses `compact` prop or responsive containers for small screens.

**ResourcesPage (`/resources`):**
- Content cards use Bootstrap columns: data sources in `col-md-6` (2-column on ≥768px), full-width on mobile.
- Exchange rates table wrapped in `.table-responsive` for horizontal scroll on narrow screens.
- Bootstrap `Accordion` used for methodology details — fully collapsible on all screen sizes.

**NavBar:**
- Bootstrap `Navbar.Toggle` and `Navbar.Collapse` provide a hamburger menu on screens below the `lg` breakpoint.
- Nav links collapse into a vertical dropdown menu on mobile.

**Print:**
- `@media print` rules in `global.css` hide the navbar, footer, and all buttons.
- Cards get `page-break-inside: avoid` and flat borders for clean printing.
- The print report feature opens a dedicated `window.open` window with a self-contained HTML document including Bootstrap CDN and inline styles, optimized for formal document printing.

### 3.7 Design Consistency Rules

The following rules are maintained consistently throughout the application:

1. **Every page uses `PageContainer`** — consistent background image treatment, navbar placement, and max-width container.
2. **Card header color coding** is semantic and consistent (blue = input, green = output/success, yellow = data/warning, cyan = visualization, dark = neutral/structural).
3. **All icon buttons** have an `aria-label` and are positioned consistently (right side of card headers or bottom of scenario cards).
4. **Bootstrap `Badge` components** are used consistently for categorical labels (region, rig type, location) rather than plain text.
5. **`Alert` components** always have a left border color via `.alert-*` classes defined in `global.css`, adding a visual emphasis stripe.
6. **All financial figures** are displayed with currency symbol prefix and formatted to 2 decimal places (millions) or integer (full dollar amounts) depending on context.

---

## 4. Key Features and User Flow

### 4.1 Application Pages Overview

| Route | Page | Purpose |
|---|---|---|
| `/#/` | HomePage | Marketing landing page and product introduction |
| `/#/calculator` | CalculatorPage | Real-time well cost estimation tool |
| `/#/analysis` | AnalysisPage | Saved scenario management, comparison, and economic analysis |
| `/#/resources` | ResourcesPage | Data sources, methodology, exchange rates, version history |

All routes use hash-based URLs (e.g., `https://[user].github.io/p120/#/calculator`).

### 4.2 Navigation Structure

The `NavBar` (persistent across all pages via `PageContainer`) provides direct access to all 4 routes. There is no hierarchical navigation — all pages are equal peers accessible from any other page at any time.

```
NavBar (always visible)
├── WellWise Drilling Calculator [brand → links to /#/]
├── Home          [FaHome icon]
├── Calculator    [FaCalculator icon]
├── Analysis      [FaChartBar icon]
└── Resources     [FaBook icon]
```

### 4.3 Onboarding Flow

WellWise has no user registration or login. Onboarding is entirely guided through the **HomePage** UI:

```
[User lands on /#/]
        │
        ▼
[ HomePage: Hero Section ]
  "WellWise Drilling Calculator"
  "Global Well Cost Estimation for Petroleum Professionals"
        │
        ▼
[ How to Use — 4-step card ]
  Step 1: Enter Well Parameters  (FaCalculator)
  Step 2: View Cost Estimates    (FaChartBar)
  Step 3: Save Your Scenario     (FaSave)
  Step 4: Compare & Analyze      (FaChartLine)
        │
        ▼
[ "Start Calculating" CTA button → navigates to /#/calculator ]
        │
        ▼
[ Feature Cards (informational) ]
  • Global Coverage (FaGlobeAmericas)
  • Economic Analysis (FaChartLine)
  • Save & Compare (FaDatabase)
```

First-time users are immediately directed to the Calculator page via the prominent CTA button.

### 4.4 Core User Flow: Cost Estimation

```
[/#/calculator — CalculatorPage]
        │
        ▼
[ WellInputForm — Column 1 ]
  User sets:
  ├── Well Depth (DepthInput): 1,000–40,000 ft
  ├── Location (LocationSelector): Onshore / Offshore
  ├── Region + Basin (RegionSelector): 5 regions, 20 basins
  ├── Rig Type (RigTypeSelector): dynamic options per region/location
  ├── Currency (Form.Select): USD / GBP / EUR / SAR / AUD / BRL / NOK
  ├── Drilling Days (DrillingDaysSlider): 10–180 days
  └── Oil Price (Form.Control): $/bbl (used for economic analysis)
        │
        │ [every input change triggers useEffect → recalculate]
        ▼
[ GlobalDrillingCalculator.calculateCost() ]
  Formula:
  ├── Fixed Costs: $500K (onshore) or $2M (offshore)
  ├── Depth Cost: depth × $150/ft (onshore) or $400/ft (offshore)
  ├── Rig Cost: rigDayRate × drillingDays
  ├── Base Cost = fixed + depth + rig
  ├── Adjusted Cost = baseCost × regionalMultiplier
  └── Final Cost = adjustedCost × currencyRate
        │
        ▼
[ Column 2: CostSummaryCard ]
  Displays: total cost (large green), base cost, multiplier badge

[ Column 3a: CostBreakdownTable ]
  Displays: 3-row table (Fixed/Depth/Rig costs + totals)

[ Column 3b: CostPieChart ]
  Displays: Recharts PieChart with % labels per cost category
        │
        ▼
[ ScenarioSaveButton — below Column 2 ]
  User clicks "Save Scenario"
        │
        ▼
[ Save Modal appears ]
  User enters: Scenario Name (required) + Notes (optional)
  → Clicks "Save"
        │
        ▼
[ storage.saveScenario() → writes to localStorage ]
  → Success alert shown for 3 seconds
  → Modal auto-closes after 1.5 seconds
```

**Smart form behaviors:**
- When **Location** changes to Offshore → `rigType` auto-sets to `jackup`, `drillingDays` auto-sets to 90.
- When **Region** changes → `rigType` resets to `standard` (since rig types are region-specific).
- On mount → `loadCurrencyRates()` attempts live fetch from exchangerate-api.com; falls back silently to static rates.

### 4.5 User Flow: Scenario Analysis and Comparison

```
[/#/analysis — AnalysisPage]
        │
        ▼
[ Loads all scenarios from localStorage on mount ]
        │
   ┌────┴────────────────┐
   │                      │
[No scenarios]      [Scenarios exist]
   │                      │
[Alert: empty]      [Scenario Cards Grid]
                     Each card shows:
                     name, date, total cost,
                     region, depth, notes
                          │
              ┌───────────┼────────────┬──────────┐
              ▼           ▼            ▼          ▼
        [Economic    [View        [Print    [Delete]
         Analysis]   Details]    Report]
              │           │            │          │
              ▼           ▼            ▼          ▼
       [Economics    [Details     [Opens new  [Removes from
        Modal xl]    Modal lg]    window:     localStorage,
        EconomicDashboard  CostBreakdownTable  full HTML   refreshes grid]
        4 KPI cards  + CostPieChart    print doc]
        NPV LineChart]
```

**Comparison flow:**
```
[ "Compare Scenarios" button (yellow, top of page) ]
        │
        ▼
[ Comparison Modal — CostBarChart ]
  Recharts BarChart with one bar per saved scenario
  All values normalized to USD (with warning if mixed currencies)
  Scenario names truncated to 20 chars
```

**Bulk actions:**
- "Clear All" button → browser `confirm()` dialog → `storage.clearAll()` → grid empties.

### 4.6 Economic Analysis Deep-Dive

The `EconomicDashboard` component runs the `EconomicAnalyzer` class against any saved scenario:

```
[ EconomicAnalyzer.calculateEconomics(drillingCost, wellParams) ]
        │
        ├── EUR estimation: production rates table × depth × well type
        ├── Break-Even Price: (CAPEX + EUR × $15 opex) / (EUR × 87.5%)
        ├── NPV: 3-year DCF at 10% discount (50%/30%/20% production decline)
        ├── ROI: (totalRevenue − CAPEX) / CAPEX × 100
        └── Payback: CAPEX / (monthly production × net revenue/bbl)
        │
        ▼
[ 4 KPI Metric Cards ]
  ├── Break-Even Price ($/bbl)
  ├── NPV (millions in selected currency)
  ├── ROI (percentage)
  └── Payback Period (months)
        │
        ▼
[ NPV Sensitivity LineChart ]
  X-axis: oil price $30–$100/bbl (8 data points)
  Y-axis: NPV in millions
  Red ReferenceLine at y=0 (break-even threshold)
        │
        ▼
[ Investment Recommendation Alert ]
  Tier 1 (success): "Strong Investment" — ROI >50%, NPV >0
  Tier 2 (info):    "Moderate Investment" — ROI >20%, NPV >0
  Tier 3 (warning): "Marginal Investment" — NPV >0 but low ROI
  Tier 4 (danger):  "Not Recommended" — NPV <0
```

### 4.7 Resources Page Content

The Resources page is purely informational and non-interactive (except for Bootstrap Accordion expansion). It contains:
- Global data sources by region (with citations)
- Drilling cost calculation formula and methodology
- Economic analysis methodology (DCF basis, assumptions)
- Important disclaimers (estimates only, not certified engineering)
- Currency exchange rates table (static, dated December 2, 2025)
- Version history (v1.0 → v3.21)

### 4.8 Page Connection Map

```
                    ┌─────────────┐
                    │  HomePage   │ ◄─── App entry point
                    │     /#/     │
                    └──────┬──────┘
                           │ "Start Calculating" CTA
                           ▼
NavBar ────────────►┌─────────────────┐◄──────────── NavBar
(from any page)     │ CalculatorPage  │              (from any page)
                    │  /#/calculator  │
                    └────────┬────────┘
                             │ Save Scenario
                             ▼
NavBar ────────────►┌─────────────────┐◄──────────── NavBar
(from any page)     │  AnalysisPage   │
                    │  /#/analysis    │
                    └─────────────────┘

NavBar ────────────►┌─────────────────┐◄──────────── NavBar
(from any page)     │  ResourcesPage  │
                    │  /#/resources   │
                    └─────────────────┘
```

All pages are always reachable from any other page via the persistent NavBar. The primary linear flow is: **Home → Calculator → Analysis**, with Resources as a reference sidebar at any time.

---

## 5. Constraints

### 5.1 Technical Constraints

**No backend or server:**
The application is entirely client-side. There is no API server, no database, no server-side rendering, and no user accounts. All data lives in the browser. This means:
- Data is device-specific and browser-specific (not synced across devices or browsers)
- Clearing browser data / private browsing destroys all saved scenarios
- No collaborative features are possible without a backend rewrite

**localStorage limits:**
Browser localStorage is capped at approximately 5MB per origin. Each saved scenario is a JSON object of ~500–1000 bytes. This allows approximately 5,000–10,000 saved scenarios before the storage limit is hit, which is far more than typical usage. However, localStorage is synchronous and blocking — very large datasets would slow down page loads.

**Static exchange rates:**
The currency conversion fallback uses hardcoded rates dated **December 2, 2025**. These rates become increasingly stale over time. The live rate fetch from exchangerate-api.com (free tier) is limited to 1,500 requests/month. If this quota is exceeded or the fetch fails for any reason, the app silently uses the stale static rates with no user notification.

**No real-time oil price data:**
The EIA (US Energy Information Administration) API integration for live WTI/Brent oil prices is **not implemented** — it exists only as a commented placeholder in `economicAnalysis.js`. The oil price used in economic analysis is the user-entered value (defaulting to $75/bbl). This means economic analysis accuracy depends entirely on the user providing a current, accurate oil price manually.

**Calculations are estimates, not certified engineering:**
The cost model is based on SPE-170941-MS methodology and simplified industry rules of thumb. It does not account for: formation complexity, HSE requirements, environmental conditions, contract negotiations, mobilization/demobilization costs, insurance, or regulatory fees. All outputs are estimates for educational and preliminary planning purposes only.

**No offline-first / PWA support:**
There is no service worker, no caching manifest, and no IndexedDB usage. The app requires an internet connection to load (Bootstrap CDN in `index.html`) and to attempt the live currency rate fetch.

**Bootstrap loaded twice:**
`index.html` loads Bootstrap 5.3.5 CSS via CDN `<link>` tag, and `main.jsx` also imports `bootstrap/dist/css/bootstrap.min.css` from the npm package (version 5.3.8). This means Bootstrap CSS is loaded twice on every page load, causing minor redundant CSS parsing overhead and potential CSS specificity conflicts between the two versions.

**No error boundaries:**
The application does not implement React Error Boundaries. An unhandled runtime error in any component will crash the entire application UI without a recovery path.

**`ScenarioCard.jsx` is unused:**
The `src/components/interactive/ScenarioCard.jsx` component exists in the codebase but is not imported or used anywhere. The `AnalysisPage` renders its own inline scenario cards. This is dead code.

**`Home.jsx` and `AboutMe.jsx` are unused stubs:**
These two components exist from the initial project scaffolding and are never imported or routed to. They should be removed or repurposed.

### 5.2 Business / Scope Constraints

- The app covers 5 regions and 20 basins/countries only. Many global drilling regions are not represented (e.g., West Africa, India, Southeast Asia).
- Only 7 currencies are supported (USD, GBP, EUR, SAR, AUD, BRL, NOK). Currencies for many significant drilling markets (CAD, CNY, RUB, IDR, NGN) are absent.
- Economic analysis uses a simplified 3-year straight-line DCF model. Real-world well economics use more complex decline curve analysis (Arps equations) over 20–30 year well lifetimes.
- No data export functionality (CSV, Excel, JSON download) — users can only print reports.
- No sharing functionality — scenarios cannot be shared with other users or teams.

---

## 6. Security

### 6.1 Current Security Posture

WellWise currently has **no secrets, API keys, or authentication tokens in the codebase**. The single external API call made at runtime (to `exchangerate-api.com`) uses a **free, keyless endpoint** that requires no authorization. The EIA API (which requires a key) is referenced only in comments and documentation — it is never called. Therefore, in its current state, the application has no secrets to protect and no security exposure from API key leakage.

### 6.2 If API Keys Are Introduced (e.g., EIA Oil Price API)

If the EIA API or any other keyed API is implemented in the future, the following practices must be followed:

#### Development: Vite Environment Variables

Vite provides a built-in mechanism for environment variables. Create a `.env.local` file in the project root:

```
# .env.local — NEVER commit this file to git
VITE_EIA_API_KEY=your_api_key_here
VITE_EXCHANGERATE_API_KEY=your_api_key_here
```

Access in source code using:
```js
const apiKey = import.meta.env.VITE_EIA_API_KEY;
```

**Critical rule:** Only environment variables prefixed with `VITE_` are exposed to the browser bundle. Variables without this prefix are ignored by Vite's client-side build.

#### Preventing Git Commits of Secrets

Add the following entries to `.gitignore` (create this file if it does not exist in the project root):

```gitignore
# Environment variable files — NEVER commit these
.env
.env.local
.env.*.local
.env.development.local
.env.test.local
.env.production.local

# OS and editor artifacts
.DS_Store
Thumbs.db
.vscode/settings.json
```

**Verify the file is ignored before committing:**
```bash
git check-ignore -v .env.local
```

#### GitHub Repository Safety

1. **Before first push**, ensure `.env.local` is listed in `.gitignore` and has never been staged.
2. **Never use `git add .` or `git add -A`** when `.env` files exist — always stage files explicitly by name.
3. If a secret was accidentally committed: immediately rotate (invalidate) the exposed key from the provider's dashboard, then use `git filter-repo` or BFG Repo-Cleaner to scrub it from git history before pushing to GitHub.
4. **GitHub Secret Scanning** can detect common API key patterns in public repositories and will notify you — but prevention is mandatory; do not rely on detection after the fact.
5. Consider using **GitHub Actions Secrets** (Settings → Secrets and Variables → Actions) for CI/CD pipelines rather than `.env` files.

#### The Fundamental Limitation of Client-Side Key Usage

**This is the most important security constraint for this architecture:**

> **Any API key embedded in a Vite/React build that is deployed to GitHub Pages or any static host is publicly visible.** Vite inlines `import.meta.env.VITE_*` variables as string literals in the compiled JavaScript bundle. Any user can open DevTools → Sources, search the bundle, and find the key in plain text.

For API keys that have **usage limits** or **billing consequences** (like a paid EIA API tier or an OpenAI key), embedding them directly in the client-side bundle is unsafe for a public deployment.

**The correct solution for secret API keys in a static SPA:**
Use a **serverless proxy function** to keep the key on the server side:
- **Netlify Functions** (`netlify/functions/getOilPrice.js`)
- **Vercel Edge Functions** (`api/getOilPrice.js`)
- **Cloudflare Workers**

The browser calls your proxy endpoint (e.g., `/api/getOilPrice`), and the proxy function calls the EIA API with the secret key stored as a server-side environment variable — the key never reaches the browser.

For **free-tier APIs with no billing risk** (like the current exchangerate-api.com free endpoint), direct client-side calls without a key are acceptable.

### 6.3 localStorage Security Considerations

Saved scenarios in `localStorage` contain only user-entered drilling parameters and calculated cost estimates. They contain no passwords, tokens, PII, or sensitive authentication data. However:

- `localStorage` is accessible to any JavaScript running on the same origin — be aware of XSS risks if user-entered text (scenario name, notes) is ever rendered as raw HTML. Currently, React's JSX rendering auto-escapes all values, so this is safe.
- Do not store API keys or tokens in `localStorage` under any circumstances.

### 6.4 Content Security

- All background images are loaded from external Unsplash URLs. If these URLs become unavailable or the images are removed, the `PageContainer` fallback gradient (`135deg, #1a1a2e → #16213e → #0f3460`) renders in their place.
- The print report feature uses `window.open()` with `document.write()` to create a new window. The content written is fully controlled by application code and contains no user-provided HTML. Bootstrap CSS is loaded from a CDN in this print window — this requires an active internet connection to render the printed report correctly.
- Bootstrap is loaded via CDN in `index.html` — always pin to a specific version (currently `5.3.5` in the CDN link) rather than `@latest` to prevent unexpected breaking changes from CDN-side updates.

---

## 7. Others — Public APIs and Authorization

### 7.1 ExchangeRate-API (Active — No Key Required)

| Property | Value |
|---|---|
| **API Name** | ExchangeRate-API |
| **Base URL** | `https://api.exchangerate-api.com/v4/latest/USD` |
| **Authentication** | None (free tier, no API key required) |
| **Rate Limit** | 1,500 requests per month on the free tier |
| **Used In** | `src/utils/calculators/globalCostCalculator.js` → `loadCurrencyRates()` and `src/utils/calculators/regionalData.js` → `getCurrencyRates()` |
| **Purpose** | Fetches current USD-based exchange rates for 7 supported currencies |
| **Fallback** | `STATIC_EXCHANGE_RATES` hardcoded in `regionalData.js` (dated December 2, 2025) |
| **Error Handling** | `try/catch` — silent fallback to static rates, no user-visible error |

**To use:** No action required. This API endpoint is public and keyless. Call it with a standard `fetch()`. Be aware of the 1,500/month quota — on a shared deployment, this could theoretically be exhausted by high traffic, but is effectively unlimited for a course project.

**Registration:** Optional. Registering at [https://www.exchangerate-api.com/](https://www.exchangerate-api.com/) provides a personal API key that increases the quota to a higher limit, enables access to the `/v6/` endpoint, and allows monitoring of usage. The free tier at `/v4/` does not require registration.

### 7.2 EIA Open Data API (Planned — Not Yet Implemented)

| Property | Value |
|---|---|
| **API Name** | U.S. Energy Information Administration (EIA) Open Data API |
| **Provider** | U.S. Department of Energy |
| **Base URL** | `https://api.eia.gov/v2/petroleum/pri/spt/data/` |
| **Authentication** | **Required — free API key** |
| **Rate Limit** | Not publicly documented; generally permissive for registered users |
| **Used In** | Referenced (but not called) in `src/utils/calculators/economicAnalysis.js` → `fetchOilPrice()` stub |
| **Purpose** | Would provide live WTI and Brent crude oil spot prices for use in economic analysis |
| **Current Status** | Not implemented. `fetchOilPrice()` returns the hardcoded default of `$75/bbl` |

**To obtain and use an EIA API key:**

1. Go to [https://www.eia.gov/opendata/register.php](https://www.eia.gov/opendata/register.php)
2. Register with a name and email address (free, instant approval)
3. An API key will be emailed immediately (format: alphanumeric string)
4. Store the key in `.env.local` as `VITE_EIA_API_KEY=your_key_here`
5. Use it in API calls: `https://api.eia.gov/v2/petroleum/pri/spt/data/?api_key=${import.meta.env.VITE_EIA_API_KEY}&...`
6. **Important:** Add `.env.local` to `.gitignore` before committing (see Security section)
7. **Important:** For public GitHub Pages deployment, see the serverless proxy recommendation in Section 6.2, as the key will be visible in the built bundle if embedded directly

**EIA API endpoint for WTI crude oil spot price:**
```
GET https://api.eia.gov/v2/petroleum/pri/spt/data/
  ?api_key=YOUR_KEY
  &frequency=daily
  &data[0]=value
  &facets[product][]=EPCWTI
  &sort[0][column]=period
  &sort[0][direction]=desc
  &length=1
```

### 7.3 Bootstrap CDN (Active — No Key Required)

| Property | Value |
|---|---|
| **Provider** | jsDelivr CDN |
| **URL** | `https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css` |
| **Authentication** | None |
| **Used In** | `index.html` `<link>` tag (loaded at page startup) |
| **Note** | This CDN load is redundant — Bootstrap is also imported via npm in `main.jsx`. The CDN version should be removed to avoid double-loading and version mismatch between 5.3.5 (CDN) and 5.3.8 (npm). |

### 7.4 Unsplash Background Images (Active — No Key Required for Direct URLs)

| Property | Value |
|---|---|
| **Provider** | Unsplash (unsplash.com) |
| **Authentication** | None for direct image URL access |
| **Used In** | `PageContainer.jsx` — `backgroundImage` prop passed from each page component |
| **Purpose** | Full-viewport background photographs for each page |
| **Terms** | Unsplash free license allows usage in applications without attribution (though attribution is recommended) |
| **Hotlinking** | Images are loaded directly from Unsplash CDN URLs — this is generally permitted by Unsplash's terms for reasonable traffic |

**If Unsplash images become unavailable:** `PageContainer` has a built-in CSS fallback gradient (`135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%`) that renders automatically when the image fails to load or when no `backgroundImage` prop is provided.

**For production robustness:** Consider downloading the background images and hosting them in the `public/` folder to eliminate the external dependency entirely.

---

*End of PRD — WellWise Drilling Calculator v3.21*
